---
title: Queue System
description: Viewer queue for managing participation in the Twitch channel.
---

The queue system lets viewers sign up for activities (game lobbies, reviews, etc.) and lets moderators manage the queue from chat.

## Commands

### Moderator/Broadcaster Commands

| Command | Description |
|---------|-------------|
| `!queue open` | Open the queue for new entries |
| `!queue close` | Close the queue (no new joins) |
| `!queue pause` | Pause the queue |
| `!queue unpause` | Unpause the queue (reopens it) |
| `!queue pick` | Pick the next viewer from the queue |
| `!queue pick random` | Pick a random viewer from the queue |
| `!queue pick <username>` | Pick a specific viewer by name |
| `!queue remove <username>` | Remove a specific viewer from the queue |
| `!queue clear` | Remove all entries from the queue |

### Viewer Commands

| Command | Description |
|---------|-------------|
| `!queue join` | Join the queue |
| `!queue leave` | Leave the queue |
| `!queue list` | Show current queue entries (up to 10) |
| `!queue position` | Check your position in the queue |

## How It Works

The queue is backed by the `QueueEntry` and `QueueState` database tables. Queue state (open/closed/paused) persists across bot restarts.

### Queue State

The `QueueState` table uses a singleton record to track the current status:

| Status | Meaning |
|--------|---------|
| `OPEN` | Viewers can join the queue |
| `CLOSED` | No new entries allowed |
| `PAUSED` | Queue is frozen — no joins or picks |

### Queue Entries

Each entry in the `QueueEntry` table represents a viewer in the queue:

- **`twitchUserId`** — Unique identifier (one entry per user)
- **`twitchUsername`** — Display name shown in the queue
- **`position`** — Integer position in the queue (determines pick order)

When `!queue pick` is called, the entry with the lowest position is selected and removed from the queue. When a viewer leaves (`!queue leave`) or is removed, their entry is deleted. `!queue clear` deletes all entries.

Viewers can also see the queue at the [public queue page](/docs/web-dashboard/public-pages).

## Dashboard Management

The queue can also be managed from the web dashboard at `/dashboard/queue`. The dashboard provides the same controls as chat commands — open, close, pause, pick, remove, and clear — with a visual interface.

The dashboard and chat bot stay in sync via the `queue:updated` EventBus event. When either side makes a change, the other is notified and updates automatically.

See [Queue Management](/docs/web-dashboard/queue-management) for full details on the dashboard interface.
