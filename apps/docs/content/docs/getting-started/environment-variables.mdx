---
title: Environment Variables
description: All environment variables used across Community Bot services.
---

All environment variables are validated at startup using [Zod](https://zod.dev/) via `@t3-oss/env-core`. Invalid or missing required variables will cause the app to fail fast with a descriptive error.

## Discord Bot

| Variable | Type | Default | Required | Description |
|----------|------|---------|----------|-------------|
| `DATABASE_URL` | string | — | Yes | PostgreSQL connection URL |
| `REDIS_URL` | string | — | Yes | Redis connection URL |
| `DISCORD_APPLICATION_ID` | string | — | Yes | Discord application ID |
| `DISCORD_APPLICATION_PUBLIC_KEY` | string | — | Yes | Discord application public key |
| `DISCORD_APPLICATION_BOT_TOKEN` | string | — | Yes | Discord bot token |
| `DISCORD_DEFAULT_STATUS` | string | `"over the Wolf Lair"` | No | Default bot status text |
| `DISCORD_DEFAULT_ACTIVITY_TYPE` | enum | `"Custom"` | No | Activity type: Playing, Streaming, Listening, Custom |
| `DISCORD_DEFAULT_ACTIVITY_URL` | string | — | No | URL for Streaming activity type |
| `DISCORD_ACTIVITY_INTERVAL_MINUTES` | number | `15` | No | Minutes between activity rotations (1-1440) |
| `OWNER_ID` | string | — | Yes | Bot owner's Discord user ID |
| `MAIN_GUILD_ID` | string | — | Yes | Primary guild ID |
| `MAIN_CHANNEL_ID` | string | — | Yes | Primary channel ID |
| `TWITCH_APPLICATION_CLIENT_ID` | string | — | Yes | Twitch client ID for stream checks |
| `HOST` | string | `"localhost"` | No | API server host |
| `PORT` | number | `3141` | No | API server port |
| `CORS_ORIGIN` | string | `"*"` | No | CORS origin for API |
| `VERSION` | string | `"1.0.0"` | No | App version |
| `NODE_ENV` | enum | `"production"` | No | Environment: development, production, test |

## Twitch Bot

| Variable | Type | Default | Required | Description |
|----------|------|---------|----------|-------------|
| `DATABASE_URL` | string | — | Yes | PostgreSQL connection URL |
| `REDIS_URL` | string | — | Yes | Redis connection URL (for EventBus pub/sub) |
| `TWITCH_APPLICATION_CLIENT_ID` | string | — | Yes | Twitch application client ID |
| `TWITCH_APPLICATION_CLIENT_SECRET` | string | — | Yes | Twitch application client secret |
| `HOST` | string | `"localhost"` | No | API server host |
| `PORT` | number | `3737` | No | API server port |
| `CORS_ORIGIN` | string | `"*"` | No | CORS origin for API |
| `NODE_ENV` | enum | `"production"` | No | Environment: development, production, test |
| `APPLE_WEATHERKIT_KEY_ID` | string | — | No | Apple Developer key ID for WeatherKit |
| `APPLE_WEATHERKIT_TEAM_ID` | string | — | No | Apple Developer Team ID |
| `APPLE_WEATHERKIT_SERVICE_ID` | string | — | No | WeatherKit service identifier |
| `APPLE_WEATHERKIT_PRIVATE_KEY` | string | — | No | ES256 private key (PEM) for WeatherKit JWT signing |

Channels are loaded from the database (`BotChannel` table) instead of environment variables. Users enable the bot for their channel via the web dashboard.

### Apple WeatherKit Setup (Optional)

The `{weather}` response variable requires an [Apple Developer account](https://developer.apple.com/) with WeatherKit enabled. If the env vars are not set, `{weather}` returns "(weather not configured)".

1. Sign in to the [Apple Developer portal](https://developer.apple.com/account)
2. Go to **Certificates, Identifiers & Profiles** > **Keys**
3. Create a new key with **WeatherKit** enabled
4. Download the `.p8` private key file
5. Create a **Services ID** with WeatherKit capability
6. Set the environment variables:

```bash
APPLE_WEATHERKIT_KEY_ID=ABC123DEF4       # Key ID from the key you created
APPLE_WEATHERKIT_TEAM_ID=TEAM123456      # Your Apple Team ID
APPLE_WEATHERKIT_SERVICE_ID=com.example.weatherkit  # Your Services ID
APPLE_WEATHERKIT_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----"
```

## Web Dashboard

| Variable | Type | Default | Required | Description |
|----------|------|---------|----------|-------------|
| `DATABASE_URL` | string | — | Yes | PostgreSQL connection URL |
| `BETTER_AUTH_SECRET` | string | — | Yes | Auth secret (min 32 chars) |
| `BETTER_AUTH_URL` | string | — | Yes | Auth callback URL |
| `CORS_ORIGIN` | string | — | Yes | Allowed CORS origin |
| `DISCORD_APPLICATION_ID` | string | — | Yes | Discord application ID (same app as Discord bot) |
| `DISCORD_APPLICATION_CLIENT_SECRET` | string | — | Yes | Discord OAuth client secret |
| `TWITCH_APPLICATION_CLIENT_ID` | string | — | Yes | Twitch application client ID (same app as Twitch bot) |
| `TWITCH_APPLICATION_CLIENT_SECRET` | string | — | Yes | Twitch application client secret |
| `REDIS_URL` | string | — | Yes | Redis connection URL (for EventBus pub/sub) |
| `NEXT_PUBLIC_PRIVACY_POLICY_URL` | string | — | No | Privacy Policy page URL (shown in cookie banner and footer) |
| `NEXT_PUBLIC_TERMS_OF_SERVICE_URL` | string | — | No | Terms of Service page URL (shown in cookie banner and footer) |
| `NEXT_PUBLIC_CHANNEL_URL` | string | — | No | Channel URL to link to on the landing page |
| `NEXT_PUBLIC_CHANNEL_NAME` | string | — | No | Channel display name for landing page copy |
| `NEXT_PUBLIC_LOGO_URL` | string | — | No | Logo image URL (light mode or default) |
| `NEXT_PUBLIC_LOGO_DARK_URL` | string | — | No | Logo image URL for dark mode (falls back to LOGO_URL) |
| `NEXT_PUBLIC_COPYRIGHT_NAME` | string | — | No | Copyright holder name shown in footer |
| `NEXT_PUBLIC_COPYRIGHT_URL` | string | — | No | URL the copyright name links to |
| `NEXT_PUBLIC_SOCIAL_LINKS` | string | — | No | Comma-separated social URLs (icons auto-detected from hostname: twitter, github, twitch, youtube) |
| `NODE_ENV` | enum | `"development"` | No | Environment |

The broadcaster is configured via the [first-time setup wizard](/docs/web-dashboard) instead of an environment variable. On first startup, the web app logs a setup URL to the console.

## Twitch OAuth Scopes

The bot requests the following OAuth scopes during setup and device auth:

| Scope | Purpose |
|-------|---------|
| `chat:read` | Read chat messages |
| `chat:edit` | Send chat messages |
| `moderator:read:followers` | Read follower data for `{followage}` variable |
| `channel:read:subscriptions` | Read subscriber count for `{subcount}` variable |

If you previously authorized the bot with only `chat:read chat:edit`, you will need to re-authorize to use the `{followage}` and `{subcount}` response variables.
